ESP32ULP GAS  adc.ulp.pS 			page 1


   1              	       
   2              	   .set adc_channel_0, 0
   3              	   .set adc_channel_1, 1
   4              	   .set adc_channel_2, 2
   5              	   .set adc_oversampling_factor_log, 3
   6              	   .set adc_oversampling_factor, (1 << adc_oversampling_factor_log)
   7              	   .set max_samples, 512
   8              	   .set max_samples_bytes, max_samples * 4
   9              	   .bss
  10              	   .global sample_counter
  11              	sample_counter:
  12 0000 00000000 	   .long 0
  13              	   .global tmp_ch_0
  14              	tmp_ch_0:
  15 0004 00000000 	    .long 0
  16              	   .global tmp_ch_1
  17              	tmp_ch_1:
  18 0008 00000000 	    .long 0
  19              	   .global tmp_ch_2
  20              	tmp_ch_2:
  21 000c 00000000 	    .long 0
  22              	 .global channel_0_measurements
  23              	channel_0_measurements:
  24 0010 00000000 	   .fill max_samples_bytes
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
ESP32ULP GAS  adc.ulp.pS 			page 2


  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
ESP32ULP GAS  adc.ulp.pS 			page 3


  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  24      00000000 
  25              	   .global channel_1_measurements
  26              	channel_1_measurements:
  27 0810 00000000 	   .fill max_samples_bytes
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
ESP32ULP GAS  adc.ulp.pS 			page 4


  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  27      00000000 
  28              	   .global channel_2_measurements
ESP32ULP GAS  adc.ulp.pS 			page 5


  29              	channel_2_measurements:
  30 1010 00000000 	   .fill max_samples_bytes
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
ESP32ULP GAS  adc.ulp.pS 			page 6


  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  30      00000000 
  31              	   .text
  32              	   .global entry
  33              	entry:
  34 0000 00008072 	   move r0, 0
  35 0004 01008072 	   move r1, 0
  36 0008 02008072 	   move r2, 0
  37 000c 00004074 	   stage_rst
  38              	measure:
  39 0010 07000050 	   adc r3, 0, adc_channel_0 + 1
  40 0014 30000070 	   add r0, r0, r3
  41 0018 0B000050 	   adc r3, 0, adc_channel_1 + 1
  42 001c 35000070 	   add r1, r1, r3
ESP32ULP GAS  adc.ulp.pS 			page 7


  43 0020 0F000050 	   adc r3, 0, adc_channel_2 + 1
  44 0024 3A000070 	   add r2, r2, r3
  45 0028 10000074 	   stage_inc 1
  46 002c 08000E85 	   jumps measure, adc_oversampling_factor, lt
  47 0030 3000C072 	   rsh r0, r0, adc_oversampling_factor_log
  48 0034 3500C072 	   rsh r1, r1, adc_oversampling_factor_log
  49 0038 3A00C072 	   rsh r2, r2, adc_oversampling_factor_log
  50 003c 03008072 	   move r3, tmp_ch_0
  51 0040 0C000068 	   st r0, r3, 0
  52 0044 03008072 	   move r3, tmp_ch_1
  53 0048 0D000068 	   st r1, r3, 0
  54 004c 03008072 	   move r3, tmp_ch_2
  55 0050 0E000068 	   st r2, r3, 0
  56 0054 03008072 	   move r3, sample_counter
  57 0058 0C0000D0 	   ld r0, r3, 0
  58 005c 03008072 	   move r3, channel_0_measurements
  59 0060 0D000070 	   add r1, r3, r0
  60 0064 03008072 	   move r3, tmp_ch_0
  61 0068 0E0000D0 	   ld r2, r3, 0
  62 006c 06000068 	   st r2, r1, 0
  63 0070 03008072 	   move r3, channel_1_measurements
  64 0074 0D000070 	   add r1, r3, r0
  65 0078 03008072 	   move r3, tmp_ch_1
  66 007c 0E0000D0 	   ld r2, r3, 0
  67 0080 06000068 	   st r2, r1, 0
  68 0084 03008072 	   move r3, channel_2_measurements
  69 0088 0D000070 	   add r1, r3, r0
  70 008c 03008072 	   move r3, tmp_ch_2
  71 0090 0E0000D0 	   ld r2, r3, 0
  72 0094 06000068 	   st r2, r1, 0
  73 0098 03008072 	   move r3, sample_counter
  74 009c 10000072 	   add r0, r0, 1
  75 00a0 0C000068 	   st r0, r3, 0
  76 00a4 00020582 	   jumpr wake_up, max_samples, ge
  77 00a8 000000B0 	   halt
  78              	wake_up:
  79 00ac 01000090 	   WAKE
  80 00b0 0600601C 	   REG_WR 0x006, 24, 24, 0
  81 00b4 000000B0 	   HALT
