ESP32ULP GAS  adc.ulp.pS 			page 1


   1              	       
   2              	   .set adc_channel_0, 0
   3              	   .set adc_channel_1, 1
   4              	   .set adc_channel_2, 2
   5              	   .set adc_oversampling_factor_log, 2
   6              	   .set adc_oversampling_factor, (1 << adc_oversampling_factor_log)
   7              	   .set max_sample_seconds, 60
   8              	   .set sample_frequency, 10
   9              	   .set max_samples, max_sample_seconds * sample_frequency
  10              	   .set max_samples_bytes, max_samples * 2
  11              	   .bss
  12              	   .global sample_counter
  13              	sample_counter:
  14 0000 00000000 	   .long 0
  15              	   .global tmp_ch_0
  16              	tmp_ch_0:
  17 0004 00000000 	    .long 0
  18              	   .global tmp_ch_1
  19              	tmp_ch_1:
  20 0008 00000000 	    .long 0
  21              	   .global tmp_ch_2
  22              	tmp_ch_2:
  23 000c 00000000 	    .long 0
  24              	 .global channel_0_measurements
  25              	channel_0_measurements:
  26 0010 00000000 	   .fill max_samples_bytes
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
ESP32ULP GAS  adc.ulp.pS 			page 2


  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
ESP32ULP GAS  adc.ulp.pS 			page 3


  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  27              	   .global channel_1_measurements
  28              	channel_1_measurements:
  29 04c0 00000000 	   .fill max_samples_bytes
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
ESP32ULP GAS  adc.ulp.pS 			page 4


  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
  29      00000000 
ESP32ULP GAS  adc.ulp.pS 			page 5


  29      00000000 
  30              	   .global channel_2_measurements
  31              	channel_2_measurements:
  32 0970 00000000 	   .fill max_samples_bytes
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
ESP32ULP GAS  adc.ulp.pS 			page 6


  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  32      00000000 
  33              	   .text
  34              	   .global entry
  35              	entry:
  36 0000 00008072 	   move r0, 0
  37 0004 01008072 	   move r1, 0
  38 0008 02008072 	   move r2, 0
  39 000c 00004074 	   stage_rst
  40              	measure:
  41 0010 07000050 	   adc r3, 0, adc_channel_0 + 1
  42 0014 30000070 	   add r0, r0, r3
ESP32ULP GAS  adc.ulp.pS 			page 7


  43 0018 0B000050 	   adc r3, 0, adc_channel_1 + 1
  44 001c 35000070 	   add r1, r1, r3
  45 0020 0F000050 	   adc r3, 0, adc_channel_2 + 1
  46 0024 3A000070 	   add r2, r2, r3
  47 0028 10000074 	   stage_inc 1
  48 002c 04000E85 	   jumps measure, adc_oversampling_factor, lt
  49 0030 2000C072 	   rsh r0, r0, adc_oversampling_factor_log
  50 0034 2500C072 	   rsh r1, r1, adc_oversampling_factor_log
  51 0038 2A00C072 	   rsh r2, r2, adc_oversampling_factor_log
  52 003c 03008072 	   move r3, tmp_ch_0
  53 0040 0C000068 	   st r0, r3, 0
  54 0044 03008072 	   move r3, tmp_ch_1
  55 0048 0D000068 	   st r1, r3, 0
  56 004c 03008072 	   move r3, tmp_ch_2
  57 0050 0E000068 	   st r2, r3, 0
  58 0054 03008072 	   move r3, sample_counter
  59 0058 0C0000D0 	   ld r0, r3, 0
  60 005c 03008072 	   move r3, channel_0_measurements
  61 0060 0D000070 	   add r1, r3, r0
  62 0064 03008072 	   move r3, tmp_ch_0
  63 0068 0E0000D0 	   ld r2, r3, 0
  64 006c 06000068 	   st r2, r1, 0
  65 0070 03008072 	   move r3, channel_1_measurements
  66 0074 0D000070 	   add r1, r3, r0
  67 0078 03008072 	   move r3, tmp_ch_1
  68 007c 0E0000D0 	   ld r2, r3, 0
  69 0080 06000068 	   st r2, r1, 0
  70 0084 03008072 	   move r3, channel_2_measurements
  71 0088 0D000070 	   add r1, r3, r0
  72 008c 03008072 	   move r3, tmp_ch_2
  73 0090 0E0000D0 	   ld r2, r3, 0
  74 0094 06000068 	   st r2, r1, 0
  75 0098 03008072 	   move r3, sample_counter
  76 009c 10000072 	   add r0, r0, 1
  77 00a0 0C000068 	   st r0, r3, 0
  78 00a4 58020582 	   jumpr wake_up, max_samples, ge
  79 00a8 000000B0 	   halt
  80              	wake_up:
  81 00ac 3000CC29 	   REG_RD ((((0x3ff48000 + 0xc0)) - 0x3ff48000) / 4), ((19) + ((((((((0x1) >> (0)) & 1) + (((0x1) >
  82 00b0 10004072 	   AND r0, r0, 1
  83 00b4 AC004080 	   JUMP wake_up, eq
  84 00b8 01000090 	   WAKE
  85 00bc 0600601C 	   REG_WR 0x006, 24, 24, 0
  86 00c0 000000B0 	   HALT
